---
title: è¾“å‡º
sidebar_position: 5
---

import CodeBlock from "@theme/CodeBlock";
import Fieldset from "/src/components/Fieldset";
import OutputDemo from "/src/components/OutputDemo";
import OutputDemoJs from "!!raw-loader!/src/components/OutputDemo/index.js";

## ä»‹ç»

æ‚¨å¯ä»¥å°†ç¼–è¾‘å™¨é‡Œçš„å¯Œæ–‡æœ¬å†…å®¹å­˜å‚¨ä¸º JSON æˆ– HTML å­—ç¬¦ä¸²ï¼Œä¸¤è€…éƒ½å·¥ä½œæ­£å¸¸ã€‚  
å½“ç„¶ï¼Œå®ƒä»¬ä¹Ÿéƒ½å¯ä»¥ç”¨æ¥ä¼ å…¥ç¼–è¾‘å™¨ç”¨äºå›æ˜¾ã€‚

## å†…å®¹çš„è¾“å‡ºä¸å›æ˜¾

è°ƒç”¨æˆ‘ä»¬æä¾›çš„æ–¹æ³•ï¼Œå³å¯è·å¾— JSON æ ¼å¼æˆ–è€… HTML å­—ç¬¦ä¸²çš„ç¼–è¾‘å™¨é‡Œçš„å¯Œæ–‡æœ¬å†…å®¹ã€‚  
æ‹¿åˆ°æ•°æ®åï¼Œæ‚¨å¦‚æœéœ€è¦å¯ä»¥å°†å…¶å­˜å‚¨åœ¨æ‚¨çš„æ•°æ®åº“ä¸­ã€‚

```js
const json = editor.getJSON(); //è·å–jsonæ ¼å¼çš„å†…å®¹
const html = editor.getHTML(); //è·å–htmlæ ¼å¼çš„å†…å®¹
```

é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›è¡Œå›æ˜¾

```js
// ç¼–è¾‘å™¨åˆå§‹åŒ–çš„æ—¶å€™è®¾ç½®
new Editor({
  content: `<p>ç¤ºä¾‹æ–‡å­—</p>`, // json æˆ– htmlå­—ç¬¦ä¸²
});

// or åæœŸå¼‚æ­¥æ›´æ–°è®¾ç½®
editor.commands.setContent(`<p>ç¤ºä¾‹æ–‡å­—</p>`); // json æˆ– htmlå­—ç¬¦ä¸²
```

:::tip ååŒä¸ Markdown
ååŒå®æ—¶ç¼–è¾‘æˆ‘ä»¬æ˜¯åŸºäº[Y.js](http://febeacon.com/yjs-docs-zh-cn/routes/) ,å®ƒåœ¨å­˜å‚¨æˆ–å›æ˜¾çš„æ—¶å€™ï¼Œæ˜¾ç„¶å’Œå¸¸è§„çš„ä¸Šè¾¹è®²çš„ä¸ä¸€æ ·ï¼Œè¿™é‡Œä¸åœ¨æ·±å…¥ï¼Œå…·ä½“çœ‹[ç›¸å…³æ–‡æ¡£](/guide/collaborative-editing)ã€‚åŒæ—¶æˆ‘ä»¬ä¸æ”¯æŒ Markdown ä½œä¸ºè¾“å…¥æˆ–è¾“å‡ºæ ¼å¼ã€‚
:::

## ç›‘å¬å˜åŒ–

å¦‚æœä½ æœ‰ ç›‘å¬ç¼–è¾‘å™¨å†…å®¹å˜åŒ–çš„éœ€æ±‚ï¼ˆæ¯”å¦‚å®æ—¶ä¿å­˜åˆ°æ•°æ®åº“ï¼‰ï¼Œæˆ‘ä»¬ä¹Ÿæä¾›äº†ä¸€ä¸ªäº‹ä»¶æ¥è®©æ‚¨èƒ½å¤ŸæŠ“æ•åˆ°è¿™æ ·çš„æ—¶æœº

```js
const editor = new Editor({
  content: `<p>ç¤ºä¾‹å†…å®¹</p>`,
  // ç›‘å¬ç¼–è¾‘å™¨ä»»ä½•å˜åŒ–
  onUpdate({ editor }) {
    const json = editor.getJSON();
    // ä¸‹è¾¹è¯·æ±‚æ¥å£
  },
});
```

## æ¸²æŸ“åœ¨éç¼–è¾‘å™¨ä¸­

è¦æƒ³åœ¨éç¼–è¾‘å™¨ä¸­ï¼Œå‘ˆç°å’Œç¼–è¾‘å™¨ä¸­ä¸€æ ·çš„æ•ˆæœã€‚ï¼ˆå€˜è‹¥ä¿å­˜çš„å†…å®¹ä¸­æœ‰æ‚¨ä¸ºç¼–è¾‘å™¨è‡ªå®šä¹‰çš„èŠ‚ç‚¹æˆ–åº”ç”¨äº†è‡ªå®šä¹‰çš„æ‰©å±•ï¼Œ é‚£ä½œä¸ºæ™®é€šçš„ HTML å†…å®¹å»æ¸²æŸ“ å¿…å®šæ˜¾ç¤ºæœ‰é—®é¢˜ï¼‰æ‚¨è§‰å¾—å¾ˆéš¾åšåˆ°å¯¹å§ã€‚  
å®é™…ä¸Š æ‚¨çš„æ€è·¯å°±ä¸å¯¹äº†ï¼Œæƒ³è¦è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼Œæ‚¨åªéœ€è¦ç¼–è¾‘å™¨è®¾ç½®ä¸ºåªè¯»ä¸å°±è¡Œäº†ï¼Ÿï¼

<Fieldset title="ğŸŒ° ä¸¾ä¸ªä¾‹å­">
  <OutputDemo />
</Fieldset>

<CodeBlock language="jsx">{OutputDemoJs}</CodeBlock>

## ProseMirror JSON ä¸ HTML ç›¸äº’è½¬æ¢

åœ¨[å†…å®¹çš„è¾“å‡ºä¸å›æ˜¾](#å†…å®¹çš„è¾“å‡ºä¸å›æ˜¾)ä¸­æˆ‘ä»¬äº†è§£åˆ° ç¼–è¾‘å™¨å¯ä»¥å†…å®¹ä¿å­˜ä¸º JSONï¼Œæ­¤ JSON å³ä¸º ProseMirror å­˜å‚¨ JSONï¼ˆä¸è¦å¿˜äº†æˆ‘ä»¬æ˜¯åŸºäºå®ƒçš„ï¼‰ï¼Œé‚£å¦‚ä½•ä¸¤è€…ç›¸äº’è½¬æ¢å‘¢ï¼Ÿ

** ProseMirror JSON è½¬ HTML **

```js
import Bold from "@tiptap/extension-bold";
import Document from "@tiptap/extension-document";
import Paragraph from "@tiptap/extension-paragraph";
import Text from "@tiptap/extension-text";
import { generateHTML } from "@tiptap/html";

const json = {
  type: "doc",
  content: [
    {
      type: "paragraph",
      content: [
        {
          type: "text",
          text: "Example ",
        },
        {
          type: "text",
          marks: [
            {
              type: "bold",
            },
          ],
          text: "Text",
        },
      ],
    },
  ],
};
const htmlStr = generateHTML(json, [Document, Paragraph, Text, Bold]);
```

** HTML è½¬ ProseMirror JSON **

```js
import Bold from "@tiptap/extension-bold";
import Document from "@tiptap/extension-document";
import Paragraph from "@tiptap/extension-paragraph";
import Text from "@tiptap/extension-text";
import { generateJSON } from "@tiptap/html";

const htmlStr = "<p>ç¤ºä¾‹ <strong>æ–‡æœ¬</strong></p>";

const json = generateJSON(html, [Document, Paragraph, Text, Bold]);
```


## ä»åˆ«çš„ç¼–è¾‘å™¨è¿ç§»
å¦‚æœæ‚¨è¦å°†ç°æœ‰å†…å®¹è¿ç§»åˆ° Tiptapï¼Œæˆ‘ä»¬å»ºè®®æ‚¨å°†ç°æœ‰è¾“å‡ºè½¬æ¢ä¸º HTMLã€‚   

HTMLå­—ç¬¦ä¸²æ˜¯åˆå§‹å†…å®¹æ”¾å…¥ Tiptap çš„æœ€ä½³æ ¼å¼ï¼Œå› ä¸º ProseMirror ä¼šç¡®ä¿å®ƒæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼šå³ä½¿æœ‰ä¸€äº›ä¸å…è®¸çš„æ ‡ç­¾æˆ–å±æ€§ï¼ˆæ ¹æ®æ‚¨çš„é…ç½®ï¼‰ï¼ŒTiptap ä¹Ÿä¼šæ‚„æ‚„åœ°æŠŠå®ƒä»¬æ‰”æ‰ï¼Œè€Œä¸ä¼šå‡ºç°æ˜¾ç¤ºå¼‚å¸¸ï¼